(this.webpackJsonpfrontclivo=this.webpackJsonpfrontclivo||[]).push([[0],{192:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},202:function(e,t,a){e.exports=a(352)},207:function(e,t,a){},208:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),c=(a(207),a(39)),i=(a(208),function(){localStorage.removeItem("user")});function s(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(200!==e.status){401!==e.status&&500!==e.status||(i(),window.location.reload("/"));var n=a&&a.message||e.statusText;return console.log(n),Promise.reject(n)}return a}))}function m(e){var t=[];for(var a in e){var n=encodeURIComponent(a),r=encodeURIComponent(e[a]);t.push(n+"="+r)}return t.join("&")}var u=function(e,t,a,n){var r=m({email:a,password:n,name:e,phone:t});return fetch("http://localhost:3000/users/register",{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST",body:r})},d=function(e,t){var a=m({email:e,password:t});return fetch("http://localhost:3000/users/authenticate",{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},method:"POST",body:a}).then(s).then((function(e){return console.log(e.data),e.data.token&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},p=i,f=function(){return JSON.parse(localStorage.getItem("user"))},E=a(356),g=a(358),h=a(44),v=a(363),b=a(364),y=a(176),k=(a(68),a(81),a(47)),w=Object(k.a)(),O=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],l=a[1];return r.a.createElement("center",null,r.a.createElement("img",{style:{width:"25%"},src:"https://pngimg.com/uploads/welcome/welcome_PNG48.png"}),r.a.createElement(E.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){l(!0);var t=e.email,a=e.password;d(t,a).then((function(){w.push("/home"),window.location.reload()}),(function(e){e.response&&e.response.data&&e.response.data.message||e.message||e.toString();l(!1)}))}},r.a.createElement(E.a.Item,{name:"email",rules:[{required:!0,message:"Please input your Email!"}]},r.a.createElement(g.a,{prefix:r.a.createElement(v.a,{className:"site-form-item-icon"}),type:"email",placeholder:"Email"})),r.a.createElement(E.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(g.a,{prefix:r.a.createElement(b.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(E.a.Item,null,o?r.a.createElement(y.a,{tip:"Loading..."}):r.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))))},S=a(152),I=a(361),j=a(360),P=function(e){console.log(e.props);var t=e.props,a=t.name,n=t.phone,o=t.email,l=t._id;return r.a.createElement("div",{className:"site-card-wrapper"},r.a.createElement("center",null,r.a.createElement(j.a,{src:"https://i0.wp.com/wipy.tv/wp-content/uploads/2020/08/nueva-imagen-de-la-secuela-de-avatar.jpg?w=1000&ssl=1",size:150}),r.a.createElement(I.a,{column:2,bordered:!0,style:{paddingTop:"5%"},title:"User Info"},r.a.createElement(I.a.Item,{label:"UserName"},a),r.a.createElement(I.a.Item,{label:"Telephone"},n),r.a.createElement(I.a.Item,{label:"Email"},o),r.a.createElement(I.a.Item,{label:"Id"},l))))};function N(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{"x-access-token":e.token,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}:{}}var T="http://localhost:3000",x=function(){localStorage.removeItem("user")};function U(e){var t=[];for(var a in e){var n=encodeURIComponent(a),r=encodeURIComponent(e[a]);t.push(n+"="+r)}return t.join("&")}function C(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(200!==e.status){401!==e.status&&500!==e.status||(x(),window.location.reload("/"));var n=a&&a.message||e.statusText;return console.log(n),Promise.reject(n)}if("jwt expired"!==a.message)return a;x(),window.location.reload("/")}))}var D=function(){var e=N();return console.log(e),fetch(T+"/users/all",{method:"POST",headers:e}).then(C)},F=function(e){var t={idUser:e},a=N(),n=U(t);return console.log(n),fetch(T+"/pay/getByUser",{method:"POST",body:n,headers:a}).then(C)},A=function(){var e=N();return console.log(e),fetch(T+"/pay/getAllPays",{method:"POST",headers:e}).then(C)},q=function(e,t){var a={firstDate:e,secondDate:t},n=N(),r=U(a);return console.log(r),fetch(T+"/pay/getByDates",{method:"POST",body:r,headers:n}).then(C)},L=function(e){var t={idParking:e},a=N(),n=U(t);return console.log(n),fetch(T+"/pay/getByParking",{method:"POST",body:n,headers:a}).then(C)},_=function(e,t,a){var n={firstDate:e,secondDate:t,idParking:a},r=N(),o=U(n);return console.log(o),fetch(T+"/pay/getByDateAndParking",{method:"POST",body:o,headers:r}).then(C)},J=function(){console.log(N());var e=N();return console.log(e),fetch(T+"/getparking",{method:"POST",headers:e}).then(C)},R=a(97),z=a(61),B=a(362),Y=function(e){console.log(e.props);var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!0),s=Object(c.a)(i,2),m=s[0],u=s[1];return Object(n.useEffect)((function(){J().then((function(e){console.log(e.data),l(e.data),u(!1)}))}),[]),r.a.createElement("div",{className:"site-card-wrapper"},m&&r.a.createElement("center",{style:{"padding-top":"25%"}},r.a.createElement(y.a,{size:"large",tip:"Loading..."})),r.a.createElement(R.a,{gutter:16},void 0!==o&&o.map((function(e){return r.a.createElement(z.a,{key:e.id,span:8},r.a.createElement(B.a,{style:{height:250,"margin-top":"10%"},title:e.name,bordered:!0},r.a.createElement("p",null,e.id),r.a.createElement("p",null,r.a.createElement("b",null,e.address))))}))))},V=a(357),K=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!0),i=Object(c.a)(l,2),s=i[0],m=i[1];Object(n.useEffect)((function(){D().then((function(e){console.log(e.data.Users),o(e.data.Users),m(!1)}))}),[]);return r.a.createElement("div",{className:"site-card-wrapper"},s&&r.a.createElement("center",{style:{"padding-top":"25%"}},r.a.createElement(y.a,{size:"large",tip:"Loading..."})),r.a.createElement(R.a,{gutter:16},void 0!==a&&a.map((function(e){return r.a.createElement(z.a,{key:e.id,span:8},r.a.createElement(B.a,{style:{height:250,"margin-top":"10%"},title:e.name,bordered:!0},r.a.createElement("p",null,e.email),r.a.createElement("p",null,r.a.createElement("b",null,e.phone)),r.a.createElement("p",null,e.id),r.a.createElement(h.a,{onClick:function(){return t=e.id,console.log(t),void F(t).then((function(e){var t=e.data.paysUser;return console.log(t),V.a.info({title:"Transacciones",content:r.a.createElement("div",null,0!==t.length?t.map((function(e){var t="Ticket: ".concat(e.ticket);return r.a.createElement(B.a,{key:e.id,style:{height:250,width:"90%","margin-top":"5%",background:"#DCF3FD"},title:t,bordered:!0},r.a.createElement("p",null,"Cantidad: ",r.a.createElement("b",null,e.amount)),r.a.createElement("p",null,"Fecha ",r.a.createElement("b",null,e.created_at)),r.a.createElement("p",null,"Id Estacionamiento ",r.a.createElement("b",null,e.idParking)))})):r.a.createElement("b",null,"Usuario sin transacciones")),onOk:function(){}})}));var t}},"Info")))}))))},W=function(e){console.log(e.props);var t=Object(n.useState)([]),a=Object(c.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!0),s=Object(c.a)(i,2),m=s[0],u=s[1];return Object(n.useEffect)((function(){A().then((function(e){console.log(e.data),l(e.data.Transactions),u(!1)}))}),[]),r.a.createElement("div",{className:"site-card-wrapper"},m&&r.a.createElement("center",{style:{"padding-top":"25%"}},r.a.createElement(y.a,{size:"large",tip:"Loading..."})),r.a.createElement(R.a,{gutter:16},void 0!==o&&o.map((function(e){var t="Ticket: ".concat(e.ticket);return r.a.createElement(z.a,{key:e.id,span:8},r.a.createElement(B.a,{key:e.id,style:{height:300,width:"90%","margin-top":"10%"},title:t,bordered:!0},r.a.createElement("p",null,"Cantidad: ",r.a.createElement("b",null,e.amount)),r.a.createElement("p",null,"Fecha: ",r.a.createElement("b",null,e.created_at)),r.a.createElement("p",null,"Id Estacionamiento: ",r.a.createElement("b",null,e.idParking)),r.a.createElement("p",null,"Id Usuario: ",r.a.createElement("b",null,e.idUser))))}))))},M=a(109),G=a(355),H=a(57),$=a.n(H),Q=a(359),X=a(354),Z=a(179),ee=a.n(Z),te=function(e,t){Q.a.warning({message:e,description:t})},ae=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(!1),s=Object(c.a)(i,2),m=(s[0],s[1],Object(n.useState)([])),u=Object(c.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)([]),g=Object(c.a)(f,2),v=g[0],b=g[1];Object(n.useEffect)((function(){J().then((function(e){console.log(e.data),p(e.data),l(!1)}))}),[]);var k=E.a.useForm(),w=Object(c.a)(k,1)[0],O="YYYY/MM/DD";return r.a.createElement("div",{className:"site-card-wrapper"},r.a.createElement("center",null,r.a.createElement(E.a,{form:w,name:"normal_login",className:"login-form-report",initialValues:{remember:!0},onFinish:function(e){var t=e.firstDate,a=e.secondDate,n=e.idParking;console.log(e),void 0!==t&&void 0===a?(console.log("Est\xe1 entrando al if"),te("Error","Debe seleccionar fecha final")):void 0===t&&void 0!==a?(console.log("Est\xe1 entrando al if"),te("Error","Debe seleccionar fecha inicial")):void 0!==n&&void 0===t&&void 0===a?(l(!0),console.log("Aqu\xed va la consilta por ID"),console.log(n),L(n).then((function(e){console.log(e.data.paysUser),b(e.data.paysUser),l(!1)}))):void 0===n&&void 0!==t&&void 0!==a?(l(!0),console.log("Aqu\xed va la funci\xf3n con fechas"),t=$()(t).format(O),a=$()(a).format(O),q(t,a).then((function(e){console.log(e.data.paysUser),b(e.data.paysUser),l(!1)}))):void 0!==n&&void 0!==t&&void 0!==a&&(l(!0),console.log("Aqu\xed va la funci\xf3n con fechas y ID"),t=$()(t).format(O),a=$()(a).format(O),_(t,a,n).then((function(e){console.log(e.data.paysUser),b(e.data.paysUser),l(!1)})));e.email,e.password}},r.a.createElement(E.a.Item,{name:"firstDate",label:"Seleccione fecha inicial"},r.a.createElement(G.a,null)),r.a.createElement(E.a.Item,{name:"secondDate",label:"Seleccione fecha final"},r.a.createElement(G.a,null)),r.a.createElement(E.a.Item,{name:"idParking",label:"Seleccione Estacionamiento"},r.a.createElement(M.a,null,void 0!==d&&d.map((function(e){return r.a.createElement(M.a.Option,{key:e.id,value:e.id},e.name)})))),r.a.createElement(E.a.Item,null,o?r.a.createElement(y.a,{tip:"Loading..."}):r.a.createElement("div",null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Consultar"),r.a.createElement(h.a,{htmlType:"button",onClick:function(){w.resetFields()}},"Reset"))))),0!==v.length&&r.a.createElement(ee.a,{style:{color:"#fff",background:"#1890ff","border-color":"#1890ff",border:"none",width:"100%",height:32},data:v,filename:"report.csv"},"Descargar data en CSV"),void 0!==v&&r.a.createElement(X.a,{dataSource:v,columns:[{title:"Estacionamiento",dataIndex:"idParking",key:"idParking"},{title:"Ticket",dataIndex:"ticket",key:"ticket"},{title:"Cantidad",dataIndex:"amount",key:"amount"},{title:"Fecha de movimiento",dataIndex:"created_at",key:"created_at"}]}))},ne=S.a.TabPane,re=function(e){var t=f();return console.log(t.token),r.a.createElement("div",null,r.a.createElement(S.a,{defaultActiveKey:"1",tabPosition:"left",style:{height:"100%"}},r.a.createElement(ne,{tab:"Profile",key:1},r.a.createElement(P,{props:t.user})),r.a.createElement(ne,{tab:"Parkings",key:2},r.a.createElement(Y,{props:t.token})),r.a.createElement(ne,{tab:"Users",key:3},r.a.createElement(K,null)),r.a.createElement(ne,{tab:"Transactions",key:4},r.a.createElement(W,null)),r.a.createElement(ne,{tab:"Report",key:5},r.a.createElement(ae,null))))},oe=a(365),le=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],l=a[1];return r.a.createElement("center",null,r.a.createElement(E.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){l(!0);var a=t.email,n=t.password,o=t.name,c=t.phone;u(o,c,a,n).then((function(){console.log("sali\xf3 perr\xf3n"),Q.a.success({message:"Successfull",description:"Your account has been created successfully. Now you can enter with your email and password",icon:r.a.createElement(oe.a,{style:{color:"#108ee9"}})}),e.history.push("/")}),(function(e){e.response&&e.response.data&&e.response.data.message||e.message||e.toString();l(!1)}))}},r.a.createElement(E.a.Item,{name:"name",rules:[{required:!0,message:"Please input your Name!"}]},r.a.createElement(g.a,{prefix:r.a.createElement(v.a,{className:"site-form-item-icon"}),placeholder:"Name"})),r.a.createElement(E.a.Item,{name:"phone",rules:[{required:!0,message:"Please input your Phone!"}]},r.a.createElement(g.a,{prefix:r.a.createElement(v.a,{className:"site-form-item-icon"}),placeholder:"Phone"})),r.a.createElement(E.a.Item,{name:"email",rules:[{required:!0,message:"Please input your Email!"}]},r.a.createElement(g.a,{prefix:r.a.createElement(v.a,{className:"site-form-item-icon"}),type:"email",placeholder:"Email"})),r.a.createElement(E.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(g.a,{prefix:r.a.createElement(b.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(E.a.Item,null,o?r.a.createElement(y.a,{tip:"Loading..."}):r.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Registrar"))))},ce=a(78),ie=a(38),se=a(353),me=a(86),ue=a(199),de=JSON.parse(localStorage.getItem("user")),pe=function(e){var t=e.component,a=Object(ue.a)(e,["component"]);return r.a.createElement(ie.b,Object.assign({},a,{render:function(e){return de&&de.token?r.a.createElement(t,e):r.a.createElement(ie.a,{to:"/"})}}))},fe=a(192),Ee=a.n(fe),ge=se.a.Header,he=se.a.Content,ve=se.a.Footer,be=function(){var e=Object(n.useState)(void 0),t=Object(c.a)(e,2),a=t[0],o=t[1];console.log(a),Object(n.useEffect)((function(){var e=f();e&&o(e)}),[]);return r.a.createElement("div",{className:"principalContainer"},r.a.createElement(se.a,{className:"layout"},r.a.createElement(ge,{style:{textAlign:"left"}},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:Ee.a,className:"App-logo",alt:"logo"})),a?r.a.createElement(me.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},r.a.createElement(me.a.Item,{key:"3"},r.a.createElement(ce.b,{onClick:function(){p(),o(void 0)},to:"/",className:"nav-link"},"Logout"))):r.a.createElement(me.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"]},r.a.createElement(me.a.Item,{key:"1"},r.a.createElement(ce.b,{to:"/",className:"nav-link"},"Login")),r.a.createElement(me.a.Item,{key:"2"},r.a.createElement(ce.b,{to:"/singin",className:"nav-link"},"Signin")))),r.a.createElement(he,{style:{padding:"0 50px"}},r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(ie.d,{history:w},r.a.createElement(pe,{exact:!0,path:"/home",component:re}),r.a.createElement(ie.b,{exact:!0,path:"/",component:O}),r.a.createElement(ie.b,{exact:!0,path:"/singin",component:le})))),r.a.createElement(ve,{style:{textAlign:"center"}},"WebApp to Clivo")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ce.a,null,r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){}},[[202,1,2]]]);
//# sourceMappingURL=main.9a2041f9.chunk.js.map